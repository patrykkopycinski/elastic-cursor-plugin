---
description: Ask Cloud vs on-prem when setting up Elastic from scratch; on-prem uses Docker
globs: *
---

# Deployment preference (Cloud vs on-prem)

- When the user wants to **set up Elastic from zero** (no existing cluster), **ask for their preference** before provisioning:
  - **Cloud**: Elastic Cloud (managed). Use `create_cloud_project`, `get_connection_config`, and related Cloud tools. No Docker or server management.
  - **On-prem**: Self-hosted with **Docker**. Use the stack in `examples/on-prem-docker/` (Elasticsearch, Kibana, Fleet server, APM server, Elastic Agent). Use `get_deployment_guide` with `preference: "on_prem"` for the step-by-step guide.
- Use the **get_deployment_guide** tool with the userâ€™s choice (`preference: "cloud"` or `preference: "on_prem"`) to return the right steps.
- For on-prem, deployment is done via **Docker** (docker-compose in this repo); do not assume a non-Docker or manual install unless the user asks for it.
- If the user already has a cluster (Cloud or self-hosted), skip the preference question and use their existing ES_URL and credentials.

## Cloud API Notes (Traditional Deployments)

- The MCP tools `create_cloud_project`, `create_project_api_key`, and `list_cloud_projects` are for **Serverless** projects only. They return empty results for traditional deployments.
- For **traditional Cloud deployments**, use the REST API directly:
  - List deployments: `GET https://api.elastic-cloud.com/api/v1/deployments` (with `Authorization: ApiKey <ELASTIC_CLOUD_API_KEY>`)
  - Reset `elastic` password: `POST https://api.elastic-cloud.com/api/v1/deployments/{deployment_id}/elasticsearch/main-elasticsearch/_reset-password`
  - The deployment ID can be found from the URL alias (e.g. `a051af` in `my-observability-deployment-a051af.es...`).
